# $1: 이전 HEAD의 ref
# $2: 새로운 HEAD의 ref  
# $3: 브랜치 체크아웃인지 파일 체크아웃인지 구분 (1: 브랜치, 0: 파일)

# 브랜치 체크아웃인 경우에만 실행
if [ "$3" = "1" ]; then
  echo "🔄 브랜치 변경 감지됨..."
  
  # package.json이 변경되었는지 확인
  if git diff --name-only $1 $2 | grep -q "package.json\|pnpm-lock.yaml"; then
    echo "📦 패키지 변경사항 감지됨. pnpm install 실행 중..."
    pnpm install
    echo "✅ 패키지 설치 완료!"
  else
    echo "📦 패키지 변경사항 없음"
  fi
fi
